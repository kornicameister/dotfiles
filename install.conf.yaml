- defaults:
    link:
      relink: true

- clean: ['~']

- shell:
    - command: git submodule update --init --recursive
      description: Install submodules
    - command: sudo apt update -qq ; sudo apt install dconf-cli zsh ccache -yy -qq
      description: Install packages
    - command: command -v tilix >/dev/null 2>&1 && dconf load /com/gexperts/Tilix/ < config/tilix
      description: Restore Tilix configuration

- link:
    ~/.dotfiles: ''

    # vim stuff
    ~/.vim: vim
    ~/.vimrc: vimrc

    # git stuff
    ~/.gitignore: gitignore
    ~/.gitconfig: gitconfig
    ~/.gitprompt: dependencies/bash-git-prompt/gitprompt.sh

    # bash stuff
    ~/.bashrc: bash/rc
    ~/.bash_profile: bash/profile
    ~/.bash_exports: bash/exports.sh
    ~/.bash_aliases: bash/aliases.sh
    ~/.bash_functions: bash/fn.sh
    ~/.bash_completion: bash/completion.sh

    # zsh stuff
    ~/.zshrc: zsh/zshrc
    ~/.zpreztorc: zsh/zpreztorc
    ~/.zlogin: zsh/zlogin
    ~/.zprofile: zsh/zprofile
    ~/.zshenv: zsh/zshenv
    ~/.zprezto: dependencies/prezto
    ~/.zgen: dependencies/zgen

    # fzf
    ~/.fzf: dependencies/fzf

    # nvm
    ~/.nvm: dependencies/nvm
    ~/.nvm.sh: nvm.sh

    # pyenv
    ~/.pyenv: dependencies/pyenv
    ~/.pyenv.sh: pyenv.sh

    # wakatime
    ~/.bash_wakatime: dependencies/bash-wakatime/bash-wakatime.sh

    # custom application configuration
    ~/.config/tilix.conf: config/tilix
    ~/.config/terminator/config:
        create: true
        path: config/terminator

- shell:
    # has to come after zsh or bashrc are sourced, because
    # it overwrites those files.
    - command: ./dependencies/fzf/install --all
      description: Install fzf
